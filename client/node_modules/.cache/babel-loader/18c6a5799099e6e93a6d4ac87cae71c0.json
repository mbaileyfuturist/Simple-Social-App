{"ast":null,"code":"var _jsxFileName = \"/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Post/Post.js\";\nimport classes from './Post.module.css';\nimport Button from '../Button/Button';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = props => {\n  const myStorage = window.localStorage;\n  const id = myStorage.getItem('id');\n\n  const deletePost = async () => {\n    const response = await axios.post('http://localhost:3001/getPosts', {\n      idToken: idToken,\n      id: id\n    });\n    const posts = await response.data;\n\n    for (let key in posts) {\n      if (posts[key].id === props.header) {\n        try {\n          const response = await axios.post('http://localhost:3001/deletePost', {\n            idToken: idToken,\n            id: id,\n            key: key\n          });\n\n          if (response.status !== 200) {\n            throw new Error('Failed to delete post.');\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.postContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.postHeader,\n      children: props.header\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: props.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: classes.button,\n      value: \"Delete Post\",\n      onClick: deletePost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Post/Post.js"],"names":["classes","Button","axios","Post","props","myStorage","window","localStorage","id","getItem","deletePost","response","post","idToken","posts","data","key","header","status","Error","error","console","log","location","reload","postContainer","postHeader","body","button"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,mBAApB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,IAAI,GAAGC,KAAK,IAAI;AAElB,QAAMC,SAAS,GAAGC,MAAM,CAACC,YAAzB;AACA,QAAMC,EAAE,GAAGH,SAAS,CAACI,OAAV,CAAkB,IAAlB,CAAX;;AAEA,QAAMC,UAAU,GAAG,YAAY;AAC1B,UAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAW,gCAAX,EAA6C;AAACC,MAAAA,OAAO,EAACA,OAAT;AAAkBL,MAAAA,EAAE,EAACA;AAArB,KAA7C,CAAvB;AACA,UAAMM,KAAK,GAAG,MAAMH,QAAQ,CAACI,IAA7B;;AAEA,SAAI,IAAIC,GAAR,IAAeF,KAAf,EAAqB;AACjB,UAAGA,KAAK,CAACE,GAAD,CAAL,CAAWR,EAAX,KAAkBJ,KAAK,CAACa,MAA3B,EAAkC;AAC9B,YAAG;AAEA,gBAAMN,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAW,kCAAX,EAA+C;AAC9DC,YAAAA,OAAO,EAACA,OADsD;AAE9DL,YAAAA,EAAE,EAACA,EAF2D;AAG9DQ,YAAAA,GAAG,EAACA;AAH0D,WAA/C,CAAvB;;AAMA,cAAGL,QAAQ,CAACO,MAAT,KAAoB,GAAvB,EAA2B;AACvB,kBAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;AACH;AACH,SAXD,CAWC,OAAMC,KAAN,EAAY;AACTC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;AACJ;AACJ;;AAEDd,IAAAA,MAAM,CAACiB,QAAP,CAAgBC,MAAhB;AACJ,GAxBD;;AA0BA,sBACI;AAAK,IAAA,SAAS,EAAExB,OAAO,CAACyB,aAAxB;AAAA,4BACI;AAAG,MAAA,SAAS,EAAEzB,OAAO,CAAC0B,UAAtB;AAAA,gBAAmCtB,KAAK,CAACa;AAAzC;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,gBAAIb,KAAK,CAACuB;AAAV;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI,QAAC,MAAD;AAAQ,MAAA,SAAS,EAAE3B,OAAO,CAAC4B,MAA3B;AAAmC,MAAA,KAAK,EAAC,aAAzC;AAAuD,MAAA,OAAO,EAAElB;AAAhE;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CAtCD;;KAAMP,I;AAwCN,eAAeA,IAAf","sourcesContent":["import classes from './Post.module.css'\nimport Button from '../Button/Button'\nimport axios from 'axios'\n\nconst Post = props => {\n\n    const myStorage = window.localStorage\n    const id = myStorage.getItem('id')\n\n    const deletePost = async () => {\n         const response = await axios.post('http://localhost:3001/getPosts', {idToken:idToken, id:id})\n         const posts = await response.data\n\n         for(let key in posts){\n             if(posts[key].id === props.header){\n                 try{\n\n                    const response = await axios.post('http://localhost:3001/deletePost', {\n                            idToken:idToken,\n                            id:id,\n                            key:key\n                        })\n\n                    if(response.status !== 200){\n                        throw new Error('Failed to delete post.')\n                    }\n                 }catch(error){\n                     console.log(error)\n                 }\n             }\n         }\n\n         window.location.reload()\n    }\n\n    return(\n        <div className={classes.postContainer}>\n            <p className={classes.postHeader}>{props.header}</p>\n            <p>{props.body}</p>\n            <Button className={classes.button} value='Delete Post' onClick={deletePost}/>\n        </div>\n    )\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}