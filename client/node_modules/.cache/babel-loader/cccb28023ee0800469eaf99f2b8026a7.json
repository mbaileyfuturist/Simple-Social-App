{"ast":null,"code":"var _jsxFileName = \"/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Authentication/Authentication.js\",\n    _s = $RefreshSig$();\n\nimport Input from '../Input/Input';\nimport Button from '../Button/Button';\nimport classes from './Authentication.module.css';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Authenticaion = () => {\n  _s();\n\n  let myStorage = window.localStorage;\n  const history = useHistory();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [userName, setUserName] = useState('');\n  const [password, setPassword] = useState('');\n  const [existingUser, setExistingUser] = useState(true);\n  const [age, setAge] = useState();\n  const [address, setAddress] = useState('');\n  const [city, setCity] = useState('');\n  const [state, setState] = useState('');\n  const [error, setError] = useState('');\n\n  const changeFirstName = event => {\n    setFirstName(event.target.value);\n  };\n\n  const changeLastName = event => {\n    setLastName(event.target.value);\n  };\n\n  const changeEmail = event => {\n    setEmail(event.target.value);\n  };\n\n  const changeUserName = event => {\n    setUserName(event.target.value);\n  };\n\n  const changePassword = event => {\n    setPassword(event.target.value);\n  };\n\n  const toggleExistingUser = () => {\n    setExistingUser(!existingUser);\n  };\n\n  const changeAge = event => {\n    setAge(event.target.value);\n  };\n\n  const changeAddress = event => {\n    setAddress(event.target.value);\n  };\n\n  const changeCity = event => {\n    setCity(event.target.value);\n  };\n\n  const changeState = event => {\n    setState(event.target.value);\n  };\n\n  const signup = async event => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post('http://localhost:3001/signup', {\n        email: email,\n        password: password,\n        returnSecureToken: true\n      });\n      const data = await response.data;\n\n      if (data.error) {\n        setError(data.error.message);\n        throw new Error(data.error.message);\n      } //If token, then post new user and navigate to upload photo.\n\n\n      if (data.idToken) {\n        myStorage.setItem('idToken', data.idToken); //Post the new user\n\n        try {\n          const response = await axios.post('http://localhost:3001/addUser', {\n            firstName: firstName,\n            lastName: lastName,\n            email: email,\n            userName: userName,\n            password: password,\n            address: address,\n            city: city,\n            state: state,\n            age: age\n          });\n\n          if (response.status !== 200) {\n            throw new Error('Failed to post new user.');\n          }\n        } catch (error) {\n          console.log(error);\n        } //Update the new user with the id provided by google.\n\n\n        let userWithId = {};\n\n        try {\n          const response = await axios.get('http://localhost:3001/getUsers');\n          const users = await response.data;\n          console.log(users);\n\n          for (let key in users) {\n            if (users[key].email === email) {\n              userWithId = { ...users[key],\n                id: key\n              };\n              myStorage.setItem('id', key);\n            }\n          }\n\n          console.log(userWithId); //Update that new user.\n\n          const responseTwo = await axios.post('http://localhost:3001/updateUser', {\n            id: userWithId.id\n          });\n\n          if (responseTwo.status !== 200) {\n            throw new Error('Failed to update new user.');\n          } //Navigate to upload photo.\n\n\n          history.push('/About');\n        } catch (error) {\n          console.log(error);\n        }\n      } else {//Set error\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const login = async event => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post('http://localhost:3001/login', {\n        email: email,\n        password: password,\n        returnSecureToken: true\n      });\n      const data = await response.data;\n\n      if (data.error) {\n        setError(data.error.message);\n        throw new Error(data.error.message);\n      } //If token, then navigat to the home component.\n\n\n      if (data.idToken) {\n        try {\n          const usersResponse = await axios.get('https://localhost:3001/getUsers');\n          const users = await usersResponse.data;\n\n          for (let key in users) {\n            if (users[key].email === email) {\n              myStorage.setItem('id', users[key].id);\n            }\n          }\n\n          myStorage.setItem('idToken', data.idToken);\n          history.push('/Home');\n        } catch (error) {\n          console.log(error);\n        }\n      } else {//Set error\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const signUpForm = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.formContainer,\n      onSubmit: signup,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formHeader,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.formTitle,\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: firstName,\n          onChange: changeFirstName,\n          placeholder: \"first name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: lastName,\n          onChange: changeLastName,\n          placeholder: \"last name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"number\",\n          value: age,\n          onChange: changeAge,\n          placeholder: \"age\",\n          placeholder: \"age\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: address,\n          onChange: changeAddress,\n          placeholder: \"address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: city,\n          onChange: changeCity,\n          placeholder: \"city\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: state,\n          onChange: changeState,\n          placeholder: \"state\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"email\",\n          value: email,\n          onChange: changeEmail,\n          placeholder: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"text\",\n          value: userName,\n          onChange: changeUserName,\n          placeholder: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"password\",\n          value: password,\n          onChange: changePassword,\n          placeholder: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.buttonContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: classes.button,\n          value: \"submit\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: toggleExistingUser,\n        className: classes.subText,\n        children: \"Already an existing user? Login here.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.error,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 8\n  }, this);\n\n  const logInForm = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.formContainer,\n      onSubmit: login,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.title,\n          children: \"Simple Social App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.formTitle,\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"email\",\n          value: email,\n          onChange: changeEmail,\n          placeholder: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          className: classes.input,\n          type: \"password\",\n          value: password,\n          onChange: changePassword,\n          placeholder: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.buttonContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: classes.button,\n          value: \"submit\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: toggleExistingUser,\n        className: classes.subText,\n        children: \"Dont have an account? Click here to create one.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.error,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 22\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 9\n  }, this);\n\n  return existingUser ? logInForm : signUpForm;\n};\n\n_s(Authenticaion, \"jwWEMJTl3G6ODVPag4L6zISiQsA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Authenticaion;\nexport default Authenticaion;\n\nvar _c;\n\n$RefreshReg$(_c, \"Authenticaion\");","map":{"version":3,"sources":["/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Authentication/Authentication.js"],"names":["Input","Button","classes","useState","useHistory","axios","Authenticaion","myStorage","window","localStorage","history","firstName","setFirstName","lastName","setLastName","email","setEmail","userName","setUserName","password","setPassword","existingUser","setExistingUser","age","setAge","address","setAddress","city","setCity","state","setState","error","setError","changeFirstName","event","target","value","changeLastName","changeEmail","changeUserName","changePassword","toggleExistingUser","changeAge","changeAddress","changeCity","changeState","signup","preventDefault","response","post","returnSecureToken","data","message","Error","idToken","setItem","status","console","log","userWithId","get","users","key","id","responseTwo","push","login","usersResponse","signUpForm","formContainer","formHeader","formTitle","inputContainer","input","buttonContainer","button","subText","logInForm","title"],"mappings":"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","sourcesContent":["import Input from '../Input/Input'\nimport Button from '../Button/Button'\nimport classes from './Authentication.module.css'\nimport {useState} from 'react'\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios'\n\nconst Authenticaion = () => {\n\n    let myStorage = window.localStorage;\n    const history = useHistory()\n\n    const [firstName, setFirstName] = useState('')\n    const [lastName, setLastName] = useState('')\n    const [email, setEmail] = useState('')\n    const [userName, setUserName] = useState('')\n    const [password, setPassword] = useState('')\n    const [existingUser, setExistingUser] = useState(true)\n    const [age, setAge] = useState()\n    const [address, setAddress] = useState('')\n    const [city, setCity] = useState('')\n    const [state, setState] = useState('')\n    const [error, setError] = useState('')\n\n    const changeFirstName = event => {\n        setFirstName(event.target.value)\n    }\n\n    const changeLastName = event => {\n        setLastName(event.target.value)\n    }\n\n    const changeEmail = event => {\n        setEmail(event.target.value)\n    }\n\n    const changeUserName = event => {\n        setUserName(event.target.value)\n    }\n\n    const changePassword = event => {\n        setPassword(event.target.value)\n    }\n\n    const toggleExistingUser = () => {\n        setExistingUser(!existingUser)\n    }\n\n    const changeAge = event => {\n        setAge(event.target.value)\n    }\n    const changeAddress = event => {\n        setAddress(event.target.value)\n    }\n\n    const changeCity = event => {\n        setCity(event.target.value)\n    }\n\n    const changeState = event => {\n        setState(event.target.value)\n    }\n\n    const signup = async event => {\n\n        event.preventDefault();\n\n        try{\n\n            const response = await axios.post('http://localhost:3001/signup',{\n                    email:email,\n                    password:password,\n                    returnSecureToken:true\n                })\n\n            const data = await response.data\n\n            if(data.error){\n                setError(data.error.message)\n                throw new Error(data.error.message)\n            }\n\n            //If token, then post new user and navigate to upload photo.\n            if(data.idToken){\n\n                myStorage.setItem('idToken', data.idToken)\n\n                //Post the new user\n                try{\n\n\n                    const response = await axios.post('http://localhost:3001/addUser', {\n                        firstName:firstName,\n                        lastName:lastName,\n                        email:email,\n                        userName:userName,\n                        password:password,\n                        address:address,\n                        city:city,\n                        state:state,\n                        age:age\n                    })\n\n                    if(response.status !== 200){\n                        throw new Error('Failed to post new user.')\n                    }\n\n                }catch(error){\n                    console.log(error)\n                }\n\n                //Update the new user with the id provided by google.\n                let userWithId = {}\n                try{\n\n                    const response = await axios.get('http://localhost:3001/getUsers')\n                    const users = await response.data\n\n                    console.log(users)\n                    for(let key in users){\n                        if(users[key].email === email){\n                            userWithId = {\n                               ...users[key],\n                               id:key\n                            }\n\n                            myStorage.setItem('id', key)\n                        }\n                    }\n\n                    console.log(userWithId)\n\n                    //Update that new user.\n                    const responseTwo = await axios.post('http://localhost:3001/updateUser', {id: userWithId.id})\n\n                    if(responseTwo.status !== 200){\n                        throw new Error('Failed to update new user.')\n                    }\n\n                    //Navigate to upload photo.\n                    history.push('/About')\n\n                }catch(error){\n                    console.log(error)\n                }\n\n            }else{\n                //Set error\n            }\n\n        }catch(error){\n            console.log(error)\n        }\n        \n    }\n\n    const login = async event => {\n\n        event.preventDefault()\n\n        try{\n\n            const response = await axios.post('http://localhost:3001/login',{\n                email:email,\n                password:password,\n                returnSecureToken:true\n                })\n\n            const data = await response.data\n\n            if(data.error){\n                setError(data.error.message)\n                throw new Error(data.error.message)\n            }\n\n        //If token, then navigat to the home component.\n        if(data.idToken){\n\n            try{\n\n                const usersResponse = await axios.get('https://localhost:3001/getUsers')\n                const users = await usersResponse.data\n\n                for(let key in users){\n                    if(users[key].email === email){\n                        myStorage.setItem('id', users[key].id)\n                    }\n                }\n\n                myStorage.setItem('idToken', data.idToken)\n                history.push('/Home')\n            }catch(error){\n                console.log(error)\n            }\n        }else{\n            //Set error\n        }\n\n        }catch(error){\n            console.log(error)\n        }\n\n\n    }\n\n    const signUpForm = (\n       <div>\n            <form className={classes.formContainer} onSubmit={signup}>\n                <div className={classes.formHeader}>\n                    <p className={classes.formTitle}>Sign Up</p>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={firstName} onChange={changeFirstName} placeholder='first name'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={lastName} onChange={changeLastName} placeholder='last name'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='number' value={age} onChange={changeAge} placeholder='age' placeholder='age'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={address} onChange={changeAddress} placeholder='address'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={city} onChange={changeCity} placeholder='city'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={state} onChange={changeState} placeholder='state'/>\n                </div>\n\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='email' value={email} onChange={changeEmail} placeholder='email'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='text' value={userName} onChange={changeUserName} placeholder='username'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='password' value={password} onChange={changePassword} placeholder='password'/>\n                </div>\n\n                <div className={classes.buttonContainer}>\n                    <Button className={classes.button}  value='submit' type='submit'/>\n                </div>\n                <p onClick={toggleExistingUser} className={classes.subText}>Already an existing user? Login here.</p>\n            </form>\n            {error ? <p className={classes.error}>{error}</p>:<></>}\n       </div>\n\n    )\n\n    const logInForm = (\n        <div>\n            <form className={classes.formContainer} onSubmit={login}>\n                <div className={classes.formHeader}>\n                    <p className={classes.title}>Simple Social App</p>\n                    <p className={classes.formTitle}>Log In</p>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='email' value={email} onChange={changeEmail} placeholder='email'/>\n                </div>\n                <div className={classes.inputContainer}>\n                    <Input className={classes.input} type='password' value={password} onChange={changePassword} placeholder='password'/>\n                </div>\n\n                <div className={classes.buttonContainer}>\n                    <Button className={classes.button} value='submit' type='submit'/>\n                </div>\n                <p onClick={toggleExistingUser} className={classes.subText}>Dont have an account? Click here to create one.</p>\n            </form>\n            {error ? <p className={classes.error}>{error}</p>:<></>}\n        </div>\n    )\n\n    return(\n        existingUser ? logInForm : signUpForm\n    )\n}\n\nexport default Authenticaion"]},"metadata":{},"sourceType":"module"}