{"ast":null,"code":"var _jsxFileName = \"/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Person/Person.js\",\n    _s = $RefreshSig$();\n\nimport classes from './Person.module.css';\nimport Button from '../Button/Button';\nimport { useHistory } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Person = props => {\n  _s();\n\n  const myStorage = window.localStorage;\n  const id = myStorage.getItem('id');\n  const history = useHistory();\n  const [user, setUser] = useState();\n  const [status, setStatus] = useState(props.status);\n  useEffect(() => {\n    const fetchUser = async () => {\n      const response = await axios.post('http://localhost:3001/getUser', {\n        idToken: idToken,\n        id: id\n      });\n      const user = await response.data;\n      setUser(user);\n    };\n\n    fetchUser();\n  }, []);\n\n  const viewProfile = () => {\n    history.push('/Profile:' + props.id);\n  };\n\n  const acceptRequest = async () => {\n    try {\n      //Set status to accepted for the user that accepted.\n      const response = await axios.post('http://localhost:3001/getFriends', {\n        id: id\n      });\n      const friends = await response.data;\n\n      for (let key in friends) {\n        if (friends[key].id === props.id) {\n          const response = await axios.post('http://localhost:3001/updateStatus', {\n            id: id,\n            key: key,\n            status: 'accepted'\n          });\n        }\n      } //Set status to accepted for the corresponding user.\n\n\n      const responseTwo = await axios.post('http://localhost:3001/getFriends', {\n        id: props.id\n      });\n      const friendsTwo = await responseTwo.data;\n\n      for (let key in friendsTwo) {\n        if (friendsTwo[key].id === user.id) {\n          const response = await axios.put('http://localhost:3001/updateStatus', {\n            id: props.id,\n            key: key,\n            status: 'accepted'\n          });\n        }\n      }\n\n      window.location.reload();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const navigateToMessageRoom = async () => {\n    history.push('/MessageRoom:' + props.id);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.personContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.userInfo,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: props.firstName + ' ' + props.lastName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Age: \", props.age]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: props.city + ' ' + props.state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.buttonsContainer,\n      children: [status === 'viewing' && /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.buttonOne,\n        value: \"View Profile\",\n        onClick: viewProfile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 42\n      }, this), status === 'sentRequest' && /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        className: classes.buttonOne,\n        value: \"Request Pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 46\n      }, this), status === 'receivedRequest' && /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.buttonOne,\n        value: \"Accept Request\",\n        onClick: acceptRequest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 50\n      }, this), status === 'accepted' && /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.buttonOne,\n        value: \"Message\",\n        onClick: navigateToMessageRoom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Person, \"Dq3LLrnbzewataPvVL46g87+y9I=\", false, function () {\n  return [useHistory];\n});\n\n_c = Person;\nexport default Person;\n\nvar _c;\n\n$RefreshReg$(_c, \"Person\");","map":{"version":3,"sources":["/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Person/Person.js"],"names":["classes","Button","useHistory","useEffect","useState","axios","Person","props","myStorage","window","localStorage","id","getItem","history","user","setUser","status","setStatus","fetchUser","response","post","idToken","data","viewProfile","push","acceptRequest","friends","key","responseTwo","friendsTwo","put","location","reload","error","console","log","navigateToMessageRoom","personContainer","userInfo","image","firstName","lastName","age","city","state","buttonsContainer","buttonOne"],"mappings":"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","sourcesContent":["import classes from './Person.module.css'\nimport Button from '../Button/Button'\nimport { useHistory } from 'react-router-dom'\nimport { useEffect, useState } from 'react'\nimport axios from 'axios'\n\nconst Person = props => {\n\n    const myStorage = window.localStorage\n    const id = myStorage.getItem('id')\n    const history = useHistory()\n    const [user, setUser] = useState()\n    const [status, setStatus] = useState(props.status)\n\n    useEffect(() => {\n        \n        const fetchUser = async () => {\n            \n            const response = await axios.post('http://localhost:3001/getUser', {idToken:idToken, id:id})\n            const user = await response.data\n            setUser(user)\n        }\n\n        fetchUser()\n    }, [])\n\n    const viewProfile = () => {\n        history.push('/Profile:' + props.id)\n    }\n\n    const acceptRequest = async () => {\n\n        try{\n\n            //Set status to accepted for the user that accepted.\n            const response = await axios.post('http://localhost:3001/getFriends', {id:id})\n            const friends = await response.data\n\n            for(let key in friends){\n                if(friends[key].id === props.id){\n                    const response = await axios.post('http://localhost:3001/updateStatus', {\n                        id:id,\n                        key:key,\n                        status:'accepted'})\n                }\n            }\n\n            //Set status to accepted for the corresponding user.\n            const responseTwo = await axios.post('http://localhost:3001/getFriends', {id:props.id})\n            const friendsTwo = await responseTwo.data\n\n            for(let key in friendsTwo){\n                if(friendsTwo[key].id === user.id){\n                    const response = await axios.put('http://localhost:3001/updateStatus', {\n                            id:props.id,\n                            key:key,\n                            status:'accepted'})\n                }\n            }\n\n            window.location.reload()\n\n        }catch(error){\n            console.log(error)\n        }\n\n    }\n\n    const navigateToMessageRoom = async () => {\n        history.push('/MessageRoom:' + props.id)\n    }\n\n    return(\n        <div className={classes.personContainer}>\n            <div className={classes.userInfo}>\n                <img src={props.image} />\n                <p>{props.firstName + ' ' + props.lastName}</p>\n                <p>Age: {props.age}</p>\n                <p>{props.city + ' ' + props.state}</p>\n            </div>\n\n            <div className={classes.buttonsContainer}>\n                {status === 'viewing' && <Button className={classes.buttonOne} value='View Profile' onClick={viewProfile}/>}\n                {status === 'sentRequest' && <Button disabled={true} className={classes.buttonOne} value='Request Pending'/>}\n                {status === 'receivedRequest' && <Button className={classes.buttonOne} value='Accept Request' onClick={acceptRequest}/>}\n                {status === 'accepted' && <Button className={classes.buttonOne} value='Message' onClick={navigateToMessageRoom}/>}\n            </div>\n        </div>\n    )\n}\n\nexport default Person"]},"metadata":{},"sourceType":"module"}