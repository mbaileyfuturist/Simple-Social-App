{"ast":null,"code":"var _jsxFileName = \"/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Post/Post.js\";\nimport classes from './Post.module.css';\nimport Button from '../Button/Button';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = props => {\n  const myStorage = window.localStorage;\n  const id = myStorage.getItem('id');\n\n  const deletePost = async () => {\n    const response = await axios.post('http://localhost:3001/getPosts', {\n      id: id\n    });\n    const posts = await response.data;\n\n    for (let key in posts) {\n      if (posts[key].id === props.header) {\n        try {\n          const response = await axios.post('http://localhost:3001/deletePost', {\n            id: id,\n            key: key\n          });\n\n          if (response.status !== 200) {\n            throw new Error('Failed to delete post.');\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.postContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.postHeader,\n      children: props.header\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: props.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: classes.button,\n      value: \"Delete Post\",\n      onClick: deletePost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/home/micheal/Documents/web-projects/Simple-Social-App/client/src/Components/Post/Post.js"],"names":["classes","Button","axios","Post","props","myStorage","window","localStorage","id","getItem","deletePost","response","post","posts","data","key","header","status","Error","error","console","log","location","reload","postContainer","postHeader","body","button"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,mBAApB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,IAAI,GAAGC,KAAK,IAAI;AAElB,QAAMC,SAAS,GAAGC,MAAM,CAACC,YAAzB;AACA,QAAMC,EAAE,GAAGH,SAAS,CAACI,OAAV,CAAkB,IAAlB,CAAX;;AAEA,QAAMC,UAAU,GAAG,YAAY;AAC1B,UAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAW,gCAAX,EAA6C;AAACJ,MAAAA,EAAE,EAACA;AAAJ,KAA7C,CAAvB;AACA,UAAMK,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAA7B;;AAEA,SAAI,IAAIC,GAAR,IAAeF,KAAf,EAAqB;AACjB,UAAGA,KAAK,CAACE,GAAD,CAAL,CAAWP,EAAX,KAAkBJ,KAAK,CAACY,MAA3B,EAAkC;AAC9B,YAAG;AAEA,gBAAML,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAW,kCAAX,EAA+C;AAC9DJ,YAAAA,EAAE,EAACA,EAD2D;AAE9DO,YAAAA,GAAG,EAACA;AAF0D,WAA/C,CAAvB;;AAKA,cAAGJ,QAAQ,CAACM,MAAT,KAAoB,GAAvB,EAA2B;AACvB,kBAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;AACH;AACH,SAVD,CAUC,OAAMC,KAAN,EAAY;AACTC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;AACJ;AACJ;;AAEDb,IAAAA,MAAM,CAACgB,QAAP,CAAgBC,MAAhB;AACJ,GAvBD;;AAyBA,sBACI;AAAK,IAAA,SAAS,EAAEvB,OAAO,CAACwB,aAAxB;AAAA,4BACI;AAAG,MAAA,SAAS,EAAExB,OAAO,CAACyB,UAAtB;AAAA,gBAAmCrB,KAAK,CAACY;AAAzC;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,gBAAIZ,KAAK,CAACsB;AAAV;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI,QAAC,MAAD;AAAQ,MAAA,SAAS,EAAE1B,OAAO,CAAC2B,MAA3B;AAAmC,MAAA,KAAK,EAAC,aAAzC;AAAuD,MAAA,OAAO,EAAEjB;AAAhE;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CArCD;;KAAMP,I;AAuCN,eAAeA,IAAf","sourcesContent":["import classes from './Post.module.css'\nimport Button from '../Button/Button'\nimport axios from 'axios'\n\nconst Post = props => {\n\n    const myStorage = window.localStorage\n    const id = myStorage.getItem('id')\n\n    const deletePost = async () => {\n         const response = await axios.post('http://localhost:3001/getPosts', {id:id})\n         const posts = await response.data\n\n         for(let key in posts){\n             if(posts[key].id === props.header){\n                 try{\n\n                    const response = await axios.post('http://localhost:3001/deletePost', {\n                            id:id,\n                            key:key\n                        })\n\n                    if(response.status !== 200){\n                        throw new Error('Failed to delete post.')\n                    }\n                 }catch(error){\n                     console.log(error)\n                 }\n             }\n         }\n\n         window.location.reload()\n    }\n\n    return(\n        <div className={classes.postContainer}>\n            <p className={classes.postHeader}>{props.header}</p>\n            <p>{props.body}</p>\n            <Button className={classes.button} value='Delete Post' onClick={deletePost}/>\n        </div>\n    )\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}